<!doctype html>
<html lang="cs" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pr≈Øchod magistersk√Ωm oborem ‚Äì interaktivn√≠ sch√©ma</title>

    <!-- React + ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for inline JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind (Play CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      html {
        scroll-behavior: smooth;
      }
      html,
      body,
      #root {
        height: 100%;
        margin: 0;
      }
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Helvetica, Arial, sans-serif;
        background: #020617;
      }

      /* Gradient pozad√≠ jako na Grafit webu */
      .bg-gradient-dark {
        /* jednotn√© tmav√© pozad√≠ bez r√°meƒçku/okrajov√©ho p≈ôechodu */
        background: #020617;
      }

      canvas {
        touch-action: manipulation;
      }

      /* Micro-motion hover pro karty (p≈ôevzato z Grafick√Ωch veƒçer≈Ø) */
      .card {
        transition: transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 300ms ease;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }
      .card:hover {
        transform: translateY(-4px) scale(1.01);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
      }
      .card .thumb {
        transform: scale(1.02);
        transition: transform 500ms cubic-bezier(0.22, 1, 0.36, 1);
      }
      .card:hover .thumb {
        transform: scale(1.06);
      }
        /* Odstranƒõn√≠ velk√©ho r√°meƒçku kolem studijn√≠ho sch√©matu */
    #root main > div > section {
      border-radius: 0;
      border: none;
      box-shadow: none;
      background: transparent;
    }
</style>
  </head>
  <body class="min-h-screen text-neutral-100">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // --- KONSTANTY PRO LAYOUT ---------------------------------------------

      const BASE_WIDTH = 1400;
      const BASE_HEIGHT = 620;

      const RECT_W = 120;
      const RECT_H = 64;
      const H_MARGIN = 120;
      const V_MARGIN = 90;
      const H_GAP = 25;
      const V_GAP = 80;

      const SEMESTERS = [
        { row: 0, label: "1. roƒçn√≠k ‚Äì zimn√≠" },
        { row: 1, label: "1. roƒçn√≠k ‚Äì letn√≠" },
        { row: 2, label: "2. roƒçn√≠k ‚Äì zimn√≠" },
        { row: 3, label: "2. roƒçn√≠k ‚Äì letn√≠" },
      ];

      // barvy lad√≠c√≠ s Grafit webem
      const COURSE_TYPES = {
        core: {
          label: "Povinn√Ω p≈ôedmƒõt programu",
          color: "#1d4ed8", // sytƒõ modr√°
        },
        specialization: {
          label: "Povinn√Ω p≈ôedmƒõt specializace",
          color: "#7c3aed", // fialov√°
        },
        graphicsElective: {
          label: "min. 1 z bloku p≈ôedmƒõt≈Ø",
          color: "#0ea5e9", // cyan
        },
        programElective: {
          label: "Povinn√Ω p≈ôedmƒõt programu / jin√Ω slot (nap≈ô. NUR)",
          color: "#eab308", // ≈ælut√°
        },
        openElective: {
          label: "Zcela voliteln√Ω p≈ôedmƒõt (nap≈ô. CCC, TVR)",
          color: "#eab308", // stejn√° ≈ælut√°
        },
        thesis: {
          label: "Diplomov√° pr√°ce",
          color: "#22c55e", // zelen√°
        },
      };

      // --- DATA P≈òEDMƒöT≈Æ -----------------------------------------------------

      const COURSES = [
        // 1. roƒçn√≠k ‚Äì zimn√≠
        {
          id: "ANI-KOP",
          short: "ANI-KOP",
          name: "Kombinatorick√° optimalizace",
          type: "core",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 0,
          description:
            "Modern√≠ metody ≈ôe≈°en√≠ kombinatorick√Ωch optimalizaƒçn√≠ch √∫loh a jejich aplikace v informatice.",
        },
        {
          id: "ANI-ARC",
          short: "ANI-ARC",
          name: "Pokroƒçil√© architektury poƒç√≠taƒç≈Ø",
          type: "core",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 1,
          description:
            "N√°vrh a fungov√°n√≠ modern√≠ch procesor≈Ø, pamƒõ≈•ov√Ωch hierarchi√≠ a paraleln√≠ch architektur.",
        },
        {
          id: "ANI-DZO",
          short: "ANI-DZO",
          name: "Digit√°ln√≠ zpracov√°n√≠ obrazu",
          type: "specialization",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 2,
          description:
            "Z√°klady i pokroƒçil√© metody pro anal√Ωzu a √∫pravu obrazov√Ωch dat.",
        },
        {
          id: "ANI-DVG",
          short: "ANI-DVG",
          name: "Diskr√©tn√≠ v√Ωpoƒçetn√≠ geometrie",
          type: "specialization",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 3,
          description:
            "Geometrick√© algoritmy pro grafiku, zpracov√°n√≠ tvar≈Ø a modelov√°n√≠.",
        },
        {
          id: "ANI-EGG",
          short: "ANI-EGG",
          name: "Enginy pro hry a grafiku",
          type: "specialization",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 4,
          description:
            "Principy hern√≠ch a grafick√Ωch engin≈Ø, komponentov√© syst√©my, asset pipeline.",
        },

        // Grafick√Ω blok ‚Äì ZS
        {
          id: "VGA",
          short: "VGA",
          name: "Architektura poƒç√≠taƒçov√Ωch her",
          type: "graphicsElective",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 5,
          description:
            "N√°vrh hern√≠ch syst√©m≈Ø, hern√≠ch smyƒçek a architektury rozs√°hlej≈°√≠ch her.",
        },
        {
          id: "PVR",
          short: "PVR",
          name: "Pokroƒçil√° virtu√°ln√≠ realita",
          type: "graphicsElective",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 6,
          description:
            "Pokroƒçil√© techniky pro VR/AR, interakce, hardware a n√°vrh z√°≈æitk≈Ø.",
        },
        {
          id: "GPU",
          short: "GPU",
          name: "Programov√°n√≠ a architektury grafick√Ωch procesor≈Ø",
          type: "graphicsElective",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 7,
          description:
            "GPGPU, compute shadery a efektivn√≠ vyu≈æit√≠ modern√≠ch GPU.",
        },
        {
          id: "CCC",
          short: "CCC",
          name: "Kreativn√≠ programov√°n√≠",
          type: "openElective",
          year: 1,
          semester: "ZS",
          row: 0,
          col: 8,
          description:
            "Kreativn√≠ programov√°n√≠ (4 kredity) ‚Äì experiment√°ln√≠ programovac√≠ techniky a mal√© projekty s d≈Ørazem na kreativitu.",
        },

        // 1. roƒçn√≠k ‚Äì letn√≠
        {
          id: "ANI-MLM",
          short: "ANI-MLM",
          name: "Metody strojov√©ho uƒçen√≠",
          type: "core",
          year: 1,
          semester: "LS",
          row: 1,
          col: 0,
          description:
            "Z√°kladn√≠ i pokroƒçil√© metody strojov√©ho uƒçen√≠ a jejich aplikace.",
        },
        {
          id: "ANI-SAI",
          short: "ANI-SAI",
          name: "Statistika pro aplikovanou informatiku",
          type: "core",
          year: 1,
          semester: "LS",
          row: 1,
          col: 1,
          description:
            "Praktick√© statistick√© metody pro anal√Ωzu dat v informatice.",
        },
        {
          id: "ANI-TPa",
          short: "ANI-TPa",
          name: "T√Ωmov√Ω projekt A",
          type: "core",
          year: 1,
          semester: "LS",
          row: 1,
          col: 2,
          description:
            "Prvn√≠ ƒç√°st dvousemestr√°ln√≠ho t√Ωmov√©ho projektu ‚Äì n√°vrh a rozbƒõh projektu.",
        },
        {
          id: "ANI-PG1",
          short: "ANI-PG1",
          name: "Poƒç√≠taƒçov√° grafika 1",
          type: "specialization",
          year: 1,
          semester: "LS",
          row: 1,
          col: 3,
          description:
            "Rendering, geometrie, shadery a z√°kladn√≠ pipeline poƒç√≠taƒçov√© grafiky.",
        },
        {
          id: "ANI-VIZ",
          short: "ANI-VIZ",
          name: "Vizualizace",
          type: "specialization",
          year: 1,
          semester: "LS",
          row: 1,
          col: 4,
          description:
            "Vizualizace dat, n√°vrh vizu√°ln√≠ch reprezentac√≠ a interaktivn√≠ pr≈Øzkum.",
        },

        // Grafick√Ω blok ‚Äì LS
        {
          id: "SSD",
          short: "SSD",
          name: "P≈ô√≠bƒõhov√Ω a hern√≠ design",
          type: "graphicsElective",
          year: 1,
          semester: "LS",
          row: 1,
          col: 5,
          description:
            "Design hern√≠ch mechanik, p≈ô√≠bƒõh≈Ø a hr√°ƒçsk√©ho z√°≈æitku.",
        },
        {
          id: "BSO",
          short: "BSO",
          name: "Biosign√°ly a zpracov√°n√≠ medic√≠nsk√Ωch dat",
          type: "graphicsElective",
          year: 1,
          semester: "LS",
          row: 1,
          col: 6,
          description:
            "Zpracov√°n√≠ biosign√°l≈Ø, medic√≠nsk√° data a jejich vizualizace.",
        },
        {
          id: "IRT",
          short: "IRT",
          name: "Internet a p≈ôenos v re√°ln√©m ƒçase",
          type: "graphicsElective",
          year: 1,
          semester: "LS",
          row: 1,
          col: 7,
          description:
            "S√≠tƒõ a protokoly pro real-time p≈ôenosy, streaming a interaktivn√≠ aplikace.",
        },
        {
          id: "TVR",
          short: "TVR",
          name: "Technologie virtu√°ln√≠ reality",
          type: "openElective",
          year: 1,
          semester: "LS",
          row: 1,
          col: 8,
          description:
            "Technologie virtu√°ln√≠ reality (4 kredity) ‚Äì hardware, software a praktick√° tvorba obsah≈Ø pro VR.",
        },

        // 2. roƒçn√≠k ‚Äì zimn√≠
        {
          id: "ANI-TPb",
          short: "ANI-TPb",
          name: "T√Ωmov√Ω projekt B",
          type: "core",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 0,
          description:
            "Druh√° ƒç√°st dvousemestr√°ln√≠ho t√Ωmov√©ho projektu ‚Äì dokonƒçen√≠ a odevzd√°n√≠.",
        },
        {
          id: "ANI-ROZ",
          short: "ANI-ROZ",
          name: "Rozpozn√°v√°n√≠",
          type: "specialization",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 1,
          description:
            "Rozpozn√°v√°n√≠ vzor≈Ø, klasifikace a uƒçen√≠ z dat.",
        },
        {
          id: "ANI-PIV",
          short: "ANI-PIV",
          name: "Poƒç√≠taƒçov√© vidƒõn√≠",
          type: "specialization",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 2,
          description:
            "Metody anal√Ωzy obrazu a videa, 3D rekonstrukce, sledov√°n√≠ objekt≈Ø.",
        },
        {
          id: "NUR",
          short: "nap≈ô. NUR",
          name: "Dal≈°√≠ povinn√Ω p≈ôedmƒõt (slot NUR)",
          type: "programElective",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 3,
          description:
            "Slot pro jin√Ω povinn√Ω p≈ôedmƒõt specializace (nap≈ô. NUR).",
        },
        {
          id: "ANI-DID",
          short: "ANI-DID",
          name: "Digital drawing",
          type: "openElective",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 4,
          description:
            "Digital drawing (2 kredity, lze zapsat v ZS i LS) ‚Äì z√°klady kreativn√≠ho kreslen√≠ na tabletu.",
        },
        {
          id: "ANI-UEE",
          short: "ANI-UEE",
          name: "Unreal Engine ‚Äì environmental design",
          type: "openElective",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 5,
          description:
            "Blokov√Ω p≈ôedmƒõt (2 kredity) zamƒõ≈ôen√Ω na tvorbu hern√≠ch prost≈ôed√≠ v Unreal Engine.",
        },
        {
          id: "ANI-GJ",
          short: "ANI-GJ",
          name: "GameJam FIT",
          type: "openElective",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 6,
          description:
            "Gamejam (0 kredit≈Ø) ‚Äì velikonoƒçn√≠ hern√≠ jam, kr√°tk√Ω intenzivn√≠ projektov√Ω p≈ôedmƒõt.",
        },
        {
          id: "ANI-DVD",
          short: "ANI-DVD",
          name: "Design vlastn√≠ch deskov√Ωch her",
          type: "openElective",
          year: 2,
          semester: "ZS",
          row: 2,
          col: 7,
          description:
            "Design vlastn√≠ch deskov√Ωch her (4 kredity) ‚Äì od n√°padu po funkƒçn√≠ prototyp.",
        },

        // 2. roƒçn√≠k ‚Äì letn√≠
        {
          id: "ANI-DIP",
          short: "ANI-DIP",
          name: "Diplomov√° pr√°ce",
          type: "thesis",
          year: 2,
          semester: "LS",
          row: 3,
          col: 0,
          description:
            "Samostatn√° diplomov√° pr√°ce (typicky navazuj√≠c√≠ na t√Ωmov√Ω projekt nebo v√Ωzkum).",
        },
      ];

      // --- RENDERING HELPERS --------------------------------------------------

      function getRectForCourse(course) {
        const x = H_MARGIN + course.col * (RECT_W + H_GAP);
        const y = V_MARGIN + course.row * (RECT_H + V_GAP);
        return { x, y, w: RECT_W, h: RECT_H };
      }

      function drawRoundedRect(ctx, x, y, w, h, r, fillStyle, strokeStyle) {
        ctx.beginPath();
        ctx.moveTo(x + r, y);
        ctx.lineTo(x + w - r, y);
        ctx.quadraticCurveTo(x + w, y, x + w, y + r);
        ctx.lineTo(x + w, y + h - r);
        ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
        ctx.lineTo(x + r, y + h);
        ctx.quadraticCurveTo(x, y + h, x, y + h - r);
        ctx.lineTo(x, y + r);
        ctx.quadraticCurveTo(x, y, x + r, y);
        ctx.closePath();
        if (fillStyle) {
          ctx.fillStyle = fillStyle;
          ctx.fill();
        }
        if (strokeStyle) {
          ctx.strokeStyle = strokeStyle;
          ctx.stroke();
        }
      }

      function drawTrack(ctx, selectedIds, courseRectsRef) {
        // tmav√© pozad√≠
        const grad = ctx.createLinearGradient(0, 0, 0, BASE_HEIGHT);
        grad.addColorStop(0, "#020617");
        grad.addColorStop(1, "#020617");
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, BASE_WIDTH, BASE_HEIGHT);

        // z√°kladn√≠ vod√≠tka
        ctx.strokeStyle = "rgba(148, 163, 184, 0.25)"; // slate-400 s pr≈Øhledem
        ctx.lineWidth = 1;
        const trackLeft = H_MARGIN - 60;
        const trackRight = BASE_WIDTH - H_MARGIN + 40;

        SEMESTERS.forEach((sem) => {
          const y = V_MARGIN + sem.row * (RECT_H + V_GAP) - 24;
          ctx.beginPath();
          ctx.moveTo(trackLeft, y);
          ctx.lineTo(trackRight, y);
          ctx.stroke();
        });

        // podkladov√© p√°sy pro grafick√Ω blok (VGA/PVR/GPU a SSD/BSO/IRT)
        const graphicsRows = Array.from(
          new Set(
            COURSES.filter((c) => c.type === "graphicsElective").map(
              (c) => c.row
            )
          )
        );

        graphicsRows.forEach((row) => {
          const rowCourses = COURSES.filter(
            (c) => c.type === "graphicsElective" && c.row === row
          ).sort((a, b) => a.col - b.col);
          if (!rowCourses.length) return;

          const firstRect = getRectForCourse(rowCourses[0]);
          const lastRect = getRectForCourse(rowCourses[rowCourses.length - 1]);

          const left = Math.max(firstRect.x - 16, trackLeft);
          const right = Math.min(lastRect.x + lastRect.w + 16, trackRight);
          const x = left;
          const y = firstRect.y - 18;
          const w = right - left;
          const h = RECT_H + 36;

          drawRoundedRect(
            ctx,
            x,
            y,
            w,
            h,
            22,
            "rgba(8, 47, 73, 0.9)",
            "rgba(45, 212, 191, 0.8)"
          );
        });

        // podkladov√© p√°sy pro ≈ælut√© voliteln√© p≈ôedmƒõty (NUR, ANI-DID, ...)
        const yellowCourses = COURSES.filter(
          (c) => c.type === "programElective" || c.type === "openElective"
        );
        const yellowRowCounts = {};
        yellowCourses.forEach((c) => {
          yellowRowCounts[c.row] = (yellowRowCounts[c.row] || 0) + 1;
        });

        const yellowRows = Object.keys(yellowRowCounts).map((r) =>
          parseInt(r, 10)
        );

        yellowRows.forEach((row) => {
          const rowCourses = COURSES.filter(
            (c) =>
              (c.type === "programElective" || c.type === "openElective") &&
              c.row === row
          ).sort((a, b) => a.col - b.col);
          if (!rowCourses.length) return;

          // pokud je v ≈ô√°dku jen jeden ≈ælut√Ω p≈ôedmƒõt, nechceme dodateƒçn√Ω spoleƒçn√Ω r√°meƒçek
          if (yellowRowCounts[row] <= 1) return;

          const firstRect = getRectForCourse(rowCourses[0]);
          const lastRect = getRectForCourse(rowCourses[rowCourses.length - 1]);

          const left = Math.max(firstRect.x - 16, trackLeft);
          const right = Math.min(lastRect.x + lastRect.w + 16, trackRight);
          const x = left;
          const y = firstRect.y - 18;
          const w = right - left;
          const h = RECT_H + 36;

          drawRoundedRect(
            ctx,
            x,
            y,
            w,
            h,
            22,
            "rgba(24, 24, 15, 0.9)",
            "rgba(250, 204, 21, 0.9)" // amber-400
          );
        });

        // popisky semestr≈Ø ‚Äì zarovn√°n√≠ doprava vlevo od prvn√≠ho sloupce
        ctx.font = "10px system-ui";
        ctx.textAlign = "right";
        ctx.textBaseline = "middle";
        ctx.fillStyle = "#fbbf24"; // amber-400

        SEMESTERS.forEach((sem) => {
          const cy = V_MARGIN + sem.row * (RECT_H + V_GAP) + RECT_H / 2;
          const x = H_MARGIN - 10; // tƒõsnƒõ vlevo od prvn√≠ho sloupce
          ctx.fillText(sem.label, x, cy);
        });

        // p≈ôedmƒõty
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        courseRectsRef.current = {};

        COURSES.forEach((course) => {
          const rect = getRectForCourse(course);
          const courseType = COURSE_TYPES[course.type];
          const isSelected = selectedIds.includes(course.id);

          let clickableRect = { ...rect };

          // sticky look pro ≈ælut√© sloty ‚Äì pouze pokud je v dan√©m ≈ô√°dku jen jeden ≈ælut√Ω p≈ôedmƒõt
          if (
            (course.type === "programElective" ||
              course.type === "openElective") &&
            yellowRowCounts[course.row] === 1
          ) {
            drawRoundedRect(
              ctx,
              rect.x - 4,
              rect.y - 4,
              rect.w + 8,
              rect.h + 8,
              10,
              "#1e293b",
              "#facc15"
            );
            clickableRect = {
              x: rect.x - 4,
              y: rect.y - 4,
              w: rect.w + 8,
              h: rect.h + 8,
            };
          }

          // samotn√Ω "ƒçtvereƒçek" p≈ôedmƒõtu
          drawRoundedRect(
            ctx,
            rect.x,
            rect.y,
            rect.w,
            rect.h,
            12,
            courseType.color,
            "#020617"
          );

          // zv√Ωraznƒõn√≠ v√Ωbƒõru
          if (isSelected) {
            ctx.lineWidth = 3;
            drawRoundedRect(
              ctx,
              rect.x - 3,
              rect.y - 3,
              rect.w + 6,
              rect.h + 6,
              14,
              null,
              "#f97316"
            );
            ctx.lineWidth = 1;
          }

          // text ‚Äì k√≥d + mal√Ω n√°zev p≈ôedmƒõtu (dvƒõ ≈ô√°dky)
          const centerX = rect.x + rect.w / 2;
          const centerY = rect.y + rect.h / 2;

          // clip dovnit≈ô obd√©ln√≠ku, aby n√°zev nep≈ôet√©kal
          ctx.save();
          ctx.beginPath();
          ctx.rect(rect.x + 4, rect.y + 4, rect.w - 8, rect.h - 8);
          ctx.clip();

          ctx.fillStyle = "#e5e7eb";
          ctx.font = "16px system-ui";
          ctx.fillText(course.short, centerX, centerY - 6);

          ctx.font = "8px system-ui";
          ctx.fillStyle = "#e5e7ebb3"; // lehce pr≈Øhledn√°
          ctx.fillText(course.name || "", centerX, centerY + 7);

          ctx.restore();

          // ulo≈æen√≠ klikac√≠ho rectu
          courseRectsRef.current[course.id] = clickableRect;
        });
      }

      // --- DETAILN√ç PANEL -----------------------------------------------------

      function CourseDetailPanel({ selectedIds }) {
        if (!selectedIds.length) {
          return (
            <p className="mt-4 text-sm text-neutral-300/80">
              Klepni na libovoln√Ω p≈ôedmƒõt v horn√≠m sch√©matu ‚Äì tady se ti zobraz√≠
              z√°kladn√≠ informace v kartƒõ ve stylu Grafick√Ωch veƒçer≈Ø.
            </p>
          );
        }

        const selectedCourses = COURSES.filter((c) =>
          selectedIds.includes(c.id)
        );

        return (
          <div className="mt-6 grid gap-5 lg:grid-cols-2 xl:grid-cols-3">
            {selectedCourses.map((course) => {
              const typeInfo = COURSE_TYPES[course.type];
              return (
                <article
                  key={course.id}
                  className="card rounded-2xl overflow-hidden border border-white/10 bg-gradient-to-b from-neutral-900 to-black flex flex-col"
                >
                  {/* horn√≠ "thumb" pruh (bez obr√°zku, jen gradient + k√≥d) */}
                  <div className="relative w-full overflow-hidden aspect-[3/1] bg-gradient-to-r from-sky-500 via-fuchsia-500 to-emerald-400">
                    <div className="thumb absolute inset-0 mix-blend-screen opacity-70" />
                    <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent" />

                    <div className="absolute left-3 top-3 inline-flex items-center gap-1 rounded-full bg-black/70 px-2.5 py-1 text-[11px] text-neutral-100 border border-white/15">
                      <span className="font-mono">{course.short}</span>
                    </div>
                    <div className="absolute right-3 bottom-3 inline-flex items-center gap-2 rounded-full bg-black/70 px-2.5 py-1 text-[11px] text-neutral-100 border border-white/15">
                      <span>
                        {course.year}. roƒçn√≠k ¬∑ {course.semester === "ZS" ? "zimn√≠" : "letn√≠"} semestr
                      </span>
                    </div>
                  </div>

                  {/* tƒõlo karty */}
                  <div className="p-4 flex-1 flex flex-col">
                    <div className="flex items-start justify-between gap-2">
                      <h3 className="text-lg font-semibold text-neutral-50 leading-snug">
                        {course.name}
                      </h3>
                      <span className="text-[11px] text-neutral-400 whitespace-nowrap">
                        {typeInfo.label}
                      </span>
                    </div>

                    <p className="mt-2 text-sm text-neutral-300/90 leading-relaxed">
                      {course.description || "Popis p≈ôedmƒõtu bude doplnƒõn."}
                    </p>

                    <div className="mt-3 flex flex-wrap gap-2 text-[11px] text-neutral-300">
                      <span className="inline-flex items-center gap-1 rounded-full border border-neutral-700/80 bg-white/5 px-2 py-0.5">
                        üìö <span>K√≥d: {course.short}</span>
                      </span>
                      <span className="inline-flex items-center gap-1 rounded-full border border-neutral-700/80 bg-white/5 px-2 py-0.5">
                        üéì <span>{course.year}. roƒçn√≠k</span>
                      </span>
                      <span className="inline-flex items-center gap-1 rounded-full border border-neutral-700/80 bg-white/5 px-2 py-0.5">
                        üïí <span>{course.semester === "ZS" ? "Zimn√≠" : "Letn√≠"} semestr</span>
                      </span>
                    </div>

                    {/* tady lze ƒçasem p≈ôidat odkaz na detail kurzu na Grafit / katalogu */}
                  </div>
                </article>
              );
            })}
          </div>
        );
      }

      // --- HLAVN√ç KOMPONENTA S CANVASEM --------------------------------------

      function StudyTrackExplorer() {
        const [selectedIds, setSelectedIds] = useState(["ANI-KOP"]);
        const containerRef = useRef(null);
        const canvasRef = useRef(null);
        const courseRectsRef = useRef({});
        const [canvasWidth, setCanvasWidth] = useState(900);

        // sledov√°n√≠ ≈°√≠≈ôky containeru
        useEffect(() => {
          function handleResize() {
            if (!containerRef.current) return;
            const w = containerRef.current.clientWidth;
            setCanvasWidth(Math.max(600, w));
          }
          handleResize();
          window.addEventListener("resize", handleResize);
          return () => window.removeEventListener("resize", handleResize);
        }, []);

        const aspect = BASE_HEIGHT / BASE_WIDTH;
        const width = canvasWidth;
        const height = width * aspect;
        const scale = width / BASE_WIDTH;

        // p≈ôekreslen√≠ canvasu
        useEffect(() => {
          const canvas = canvasRef.current;
          if (!canvas) return;
          const ctx = canvas.getContext("2d");
          const dpr = window.devicePixelRatio || 1;

          canvas.width = width * dpr;
          canvas.height = height * dpr;

          ctx.setTransform(1, 0, 0, 1, 0, 0);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.scale(dpr * scale, dpr * scale);

          drawTrack(ctx, selectedIds, courseRectsRef);
        }, [width, height, scale, selectedIds]);

        // obsluha kliknut√≠
        const handleCanvasClick = (event) => {
          const canvas = canvasRef.current;
          if (!canvas) return;
          const rect = canvas.getBoundingClientRect();
          const x = (event.clientX - rect.left) / scale;
          const y = (event.clientY - rect.top) / scale;

          let clickedId = null;
          for (const course of COURSES) {
            const r = courseRectsRef.current[course.id];
            if (!r) continue;
            if (x >= r.x && x <= r.x + r.w && y >= r.y && y <= r.y + r.h) {
              clickedId = course.id;
              break;
            }
          }

          if (!clickedId) return;

          // multi-v√Ωbƒõr s Ctrl/Meta/Shift, jinak single
          if (event.shiftKey || event.ctrlKey || event.metaKey) {
            setSelectedIds((prev) =>
              prev.includes(clickedId)
                ? prev.filter((id) => id !== clickedId)
                : [...prev, clickedId]
            );
          } else {
            setSelectedIds((prev) =>
              prev.length === 1 && prev[0] === clickedId ? [] : [clickedId]
            );
          }
        };

        return (
          <div ref={containerRef} className="w-full">
            <div className="relative overflow-hidden rounded-2xl bg-black/40">
              <div className="px-4 pt-4 pb-2 sm:px-6 sm:pt-5">
                <p className="text-[11px] font-medium uppercase tracking-[0.24em] text-cyan-300/80 mb-1">
                  Magistersk√Ω obor ‚Ä¢ Poƒç√≠taƒçov√° grafika a vizualizace
                </p>
                <h2 className="text-xl sm:text-2xl font-semibold tracking-tight">
                  Pr≈Øchod magistersk√Ωm oborem (interaktivn√≠ mapa)
                </h2>
                <p className="mt-2 max-w-3xl text-xs sm:text-sm text-neutral-300">
                  Ka≈æd√Ω obd√©ln√≠k v horn√≠m sch√©matu reprezentuje jeden p≈ôedmƒõt. Barvy
                  odpov√≠daj√≠ typu p≈ôedmƒõtu (povinn√Ω, specializace, grafick√Ω blok,
                  voliteln√Ω slot). Po kliknut√≠ na p≈ôedmƒõt se n√≠≈æe zobraz√≠ karta ve
                  stylu Grafick√Ωch veƒçer≈Ø. Na desktopu m≈Ø≈æe≈° dr≈æet
                  <span className="font-mono"> Shift / Ctrl </span>
                  pro v√Ωbƒõr v√≠ce p≈ôedmƒõt≈Ø.
                </p>
              </div>
              <div className="px-2 pb-4 sm:px-4 bg-gradient-to-b from-slate-900/80 to-black/90">
                <canvas
                  ref={canvasRef}
                  width={width}
                  height={height}
                  style={{
                    width: width + "px",
                    height: height + "px",
                    display: "block",
                    margin: "0 auto 0.75rem auto",
                  }}
                  onClick={handleCanvasClick}
                />
              </div>
            </div>

            <CourseDetailPanel selectedIds={selectedIds} />
          </div>
        );
      }

      function App() {
        const [wide, setWide] = useState(false);

        const containerClass =
          "mx-auto flex w-full flex-col gap-6 " + (wide ? "" : "max-w-6xl");

        return (
          <div className="min-h-screen text-neutral-100">
            <main className="px-4 py-6 sm:px-6 lg:px-8">
              <div className={containerClass}>
                <header className="space-y-2">
                  <h1 className="text-2xl sm:text-3xl font-extrabold tracking-tight">
                    Magistersk√Ω obor ‚Äì vizu√°ln√≠ pr≈Øchod p≈ôedmƒõty
                  </h1>
                  <p className="max-w-3xl text-sm text-neutral-300/90">
                    Tato str√°nka je prototyp interaktivn√≠ho sch√©matu ve stylu Grafit
                    webu. Horn√≠ canvas bude mo≈æn√© vlo≈æit do ≈°ablony studijn√≠ho pl√°nu,
                    spodn√≠ karty pak mohou kop√≠rovat detail p≈ôedmƒõtu podobnƒõ jako
                    polo≈æky Grafick√Ωch veƒçer≈Ø.
                  </p>
                  <div className="pt-1">
                    <button
                      onClick={() => setWide((prev) => !prev)}
                      className="inline-flex items-center gap-2 rounded-full border border-white/15 bg-black/40 px-3 py-1.5 text-xs text-neutral-200 hover:bg-white/10"
                    >
                      <span
                        className="h-2 w-2 rounded-full"
                        style={{ backgroundColor: wide ? "#22c55e" : "#64748b" }}
                      />
                      {wide
                        ? "≈†irok√Ω re≈æim (cel√° ≈°√≠≈ôka obrazovky)"
                        : "Kompaktn√≠ re≈æim (u≈æ≈°√≠ sloupec)"}
                    </button>
                  </div>
                </header>

                <StudyTrackExplorer />
              </div>
            </main>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
