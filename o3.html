<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <title>Magisterský obor – vizuální průchod předměty</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 18 + ReactDOM + Babel -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      min-height: 100%;
      background:
        radial-gradient(circle at top, #1f2937 0, #020617 55%, #020617 100%);
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   Roboto, Helvetica, Arial, sans-serif;
    }

    /* Jednotná velikost "pillů" v horní mapě */
    .course-pill {
      width: 230px;
      height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 0.65rem 1rem;
      border-radius: 9999px;
      text-align: center;
    }
    .course-pill > :first-child {
      min-height: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .course-pill > :last-child {
      min-height: 2.1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1.15;
    }

    /* Hover mikro-motion pro pill */
    .course-pill {
      transition:
        transform 220ms cubic-bezier(.2,.8,.2,1),
        box-shadow 220ms ease,
        filter 220ms ease;
      box-shadow: 0 12px 30px rgba(15,23,42,0.7);
    }
    .course-pill:hover {
      transform: translateY(-3px);
      box-shadow: 0 18px 40px rgba(15,23,42,0.95);
      filter: brightness(1.08);
    }

    /* Detaily – card hover */
    .course-card {
      transition:
        transform 220ms cubic-bezier(.2,.8,.2,1),
        box-shadow 220ms ease,
        border-color 220ms ease;
    }
    .course-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 22px 60px rgba(15,23,42,0.95);
      border-color: rgba(251,191,36,0.7);
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo } = React;

    // --- DATA --------------------------------------------------------------

    const COURSES = [
      // 1. ročník – zimní
      {
        code: "ANI-KOP",
        name: "Kombinatorická optimalizace",
        short: "Moderní metody kombinatorické optimalizace",
        description:
          "Moderní metody řešení kombinatorických optimalizačních úloh a jejich aplikace v informatice.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-ARC",
        name: "Moderní procesorové architektury",
        short: "Moderní procesorové architektury",
        description:
          "Architektury současných CPU/GPU, jejich vnitřní paralelismus a vliv na návrh algoritmů.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-DZO",
        name: "Digitalizace a zpracování obrazu",
        short: "Zpracování a analýza obrazu",
        description:
          "Vybrané metody zpracování obrazu, segmentace, filtrování, detekce objektů a praktické aplikace.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-DVG",
        name: "Geometrické algoritmy",
        short: "Geometrické algoritmy",
        description:
          "Algoritmy pro práci s geometrickými daty, prostorové indexy a výpočetní geometrie.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-EGG",
        name: "Enginy pro hry a grafiku",
        short: "Herní a grafické enginy",
        description:
          "Principy návrhu herních a grafických enginů, datové struktury, asset pipeline a skriptování.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },

      // grafický blok – zimní
      {
        code: "VGA",
        name: "Architektura počítačových her",
        short: "Architektura počítačových her",
        description:
          "Struktura herních projektů, vrstvy enginu, návrh subsystémů a jejich spolupráce.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "gfx",
      },
      {
        code: "PVR",
        name: "Pokročilá virtuální realita",
        short: "Pokročilá virtuální realita",
        description:
          "Pokročilé techniky pro VR, interakce, komfort, prototypování a evaluace VR aplikací.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "gfx",
      },
      {
        code: "GPU",
        name: "Osvětlení a architektury grafických procesorů",
        short: "GPU a grafická pipeline",
        description:
          "Moderní pipeline na GPU, shadery, optimalizace a rozhraní pro programování grafiky.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "gfx",
      },

      // volitelné – zimní (příklad: CCC)
      {
        code: "CCC",
        name: "Kreativní programování",
        short: "Kreativní programování",
        description:
          "Programování jako výrazový prostředek – generativní grafika, interaktivní instalace, zvuk.",
        year: 1,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "elective",
      },

      // 1. ročník – letní
      {
        code: "ANI-MLM",
        name: "Metody strojového učení",
        short: "Metody strojového učení",
        description:
          "Základní techniky strojového učení a jejich použití v grafice, vizualizaci a zpracování dat.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-SAI",
        name: "Praktická statistika",
        short: "Praktická statistika",
        description:
          "Statistika v praxi – odhad parametrů, testování hypotéz, vizualizace a interpretace výsledků.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-TPA",
        name: "Týmový projekt A",
        short: "Týmový projekt A",
        description:
          "Projekt v menších týmech zaměřený na vývoj grafické / herní / vizualizační aplikace.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-PG1",
        name: "Počítačová grafika 1",
        short: "Základy počítačové grafiky",
        description:
          "Základní pipeline, transformace, osvětlení a vykreslování 3D scén.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-VIZ",
        name: "Vizualizace",
        short: "Datová a vědecká vizualizace",
        description:
          "Techniky vizualizace dat, návrh vizualizačních rozhraní a vyhodnocování jejich efektivity.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 6,
        kind: "core",
      },

      // grafický blok – letní
      {
        code: "SSD",
        name: "Story & game design",
        short: "Story & game design",
        description:
          "Návrh herního zážitku, práce s příběhem, pacingem a herními systémy.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 4,
        kind: "gfx",
      },
      {
        code: "BSO",
        name: "Biosignály a data",
        short: "Biosignály a zpracování dat",
        description:
          "Zpracování biosignálů a jejich využití v interaktivních aplikacích a vizualizaci.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 4,
        kind: "gfx",
      },
      {
        code: "IRT",
        name: "Internet & real-time",
        short: "Internet a přenos v reálném čase",
        description:
          "Síťové technologie pro real-time aplikace, streaming a interaktivní služby.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 4,
        kind: "gfx",
      },

      // příklad volitelného z letního: TVR
      {
        code: "TVR",
        name: "Technologie virtuální reality",
        short: "Technologie virtuální reality",
        description:
          "Hardware, interakční zařízení a SW stack pro VR/AR aplikace.",
        year: 1,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 4,
        kind: "elective",
      },

      // 2. ročník – zimní
      {
        code: "ANI-TPb",
        name: "Týmový projekt B",
        short: "Týmový projekt B",
        description:
          "Pokračování týmového projektu, důraz na polish, evaluaci a prezentaci výsledků.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-ROZ",
        name: "Rozpoznávání",
        short: "Rozpoznávání obrazů a dat",
        description:
          "Metody rozpoznávání, klasifikace a detekce založené na klasických i moderních přístupech.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },
      {
        code: "ANI-PIV",
        name: "Počítačové vidění",
        short: "Počítačové vidění",
        description:
          "Metody počítačového vidění a jejich aplikace v grafice, robotice a analýze scén.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 6,
        kind: "core",
      },

      // blok NUR + DID + UEE + GJ + DVD (volitelné / specializace)
      {
        code: "NUR",
        name: "Slot pro další povinný předmět",
        short: "Slot pro další povinný předmět",
        description:
          "Místo pro další povinný předmět dle zvoleného plánu studia.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "elective",
      },
      {
        code: "ANI-DID",
        name: "Digital drawing",
        short: "Digital drawing",
        description:
          "Digitální kresba a ilustrace – techniky, workflow, práce s tabletem.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "elective",
      },
      {
        code: "ANI-UEE",
        name: "UE – environmental design",
        short: "UE – environmental design",
        description:
          "Navrhování prostředí v Unreal Engine – od blokování po finalizaci scény.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "elective",
      },
      {
        code: "ANI-GJ",
        name: "GameJam FIT (0 kreditů)",
        short: "GameJam FIT (0 kreditů)",
        description:
          "Blokový předmět založený na účasti na GameJamu FIT – intenzivní týmová práce.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 0,
        kind: "elective",
      },
      {
        code: "ANI-DVD",
        name: "Design vlastních deskových her",
        short: "Design deskových her",
        description:
          "Návrh, prototypování a testování vlastních deskových her.",
        year: 2,
        sem: "ZS",
        semLabel: "zimní semestr",
        credits: 4,
        kind: "elective",
      },

      // 2. ročník – letní
      {
        code: "ANI-DIP",
        name: "Diplomová práce",
        short: "Diplomová práce",
        description:
          "Samostatná diplomová práce zakončující magisterské studium.",
        year: 2,
        sem: "LS",
        semLabel: "letní semestr",
        credits: 30,
        kind: "thesis",
      },
    ];

    const SEMESTER_ROWS = [
      { id: "1_zs", label: "1. ročník – zimní", year: 1, sem: "ZS" },
      { id: "1_ls", label: "1. ročník – letní", year: 1, sem: "LS" },
      { id: "2_zs", label: "2. ročník – zimní", year: 2, sem: "ZS" },
      { id: "2_ls", label: "2. ročník – letní", year: 2, sem: "LS" },
    ];

    const KIND_COLORS = {
      core: "from-sky-500 to-blue-500",
      gfx: "from-cyan-400 to-sky-500",
      elective: "from-amber-400 to-amber-500",
      thesis: "from-emerald-400 to-emerald-500",
    };

    // --- POMOCNÉ KOMPONENTY -----------------------------------------------

    const CoursePill = ({ course, selected, onClick }) => {
      const gradient = KIND_COLORS[course.kind] || "from-slate-500 to-slate-600";
      const ring =
        selected
          ? "ring-2 ring-amber-300 ring-offset-2 ring-offset-slate-950"
          : "hover:ring hover:ring-slate-100/30";

      return (
        <button
          type="button"
          onClick={onClick}
          className={
            `course-pill bg-gradient-to-r ${gradient} text-[11px] sm:text-sm font-medium text-white ` +
            `${ring}`
          }
        >
          <div className="font-semibold tracking-wide">
            {course.code}
          </div>
          <div className="mt-1 text-[10px] sm:text-[11px] opacity-95">
            {course.short}
          </div>
        </button>
      );
    };

    const CourseDetailCard = ({ course }) => {
      const slug = course.code.toLowerCase().replace(/-/g, "");
      const heroSrc = `assets/${slug}.png`;

      return (
        <article className="course-card rounded-3xl border border-slate-800 bg-slate-950/90 overflow-hidden shadow-2xl flex flex-col">
          {/* hero obrázek */}
          <div className="relative h-24 overflow-hidden bg-slate-900">
            <img
              src={heroSrc}
              alt={course.code}
              className="w-full h-full object-cover object-top opacity-90"
              loading="lazy"
            />
            <div className="absolute left-3 top-2 inline-flex items-center rounded-full bg-black/70 px-3 py-1 text-[10px] uppercase tracking-wide text-slate-100 border border-white/15">
              {course.code}
            </div>
            <div className="absolute right-3 top-2 inline-flex items-center rounded-full bg-black/70 px-3 py-1 text-[10px] text-slate-100 border border-white/15">
              {course.year}. ročník · {course.semLabel}
            </div>
          </div>

          {/* text */}
          <div className="p-4 flex-1 flex flex-col gap-2 text-sm">
            <h3 className="text-base font-semibold text-white">
              {course.name}
            </h3>
            <p className="text-xs sm:text-[13px] leading-relaxed text-slate-200/90">
              {course.description}
            </p>

            <div className="mt-2 flex flex-wrap gap-2 text-[11px] text-slate-100/90">
              <span className="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/70 px-2.5 py-0.5">
                Kód: {course.code}
              </span>
              <span className="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/70 px-2.5 py-0.5">
                Ročník: {course.year}.
              </span>
              <span className="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/70 px-2.5 py-0.5">
                Semestr: {course.semLabel}
              </span>
              <span className="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/70 px-2.5 py-0.5">
                Kredity: {course.credits}
              </span>
              <span className="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/70 px-2.5 py-0.5">
                Typ: {course.kind === "core"
                  ? "povinný"
                  : course.kind === "gfx"
                  ? "grafický blok"
                  : course.kind === "thesis"
                  ? "diplomová práce"
                  : "volitelný"}
              </span>
            </div>
          </div>
        </article>
      );
    };

    const StudyTrackMap = ({ selectedCodes, onToggle }) => {
      return (
        <section className="rounded-3xl border border-slate-800/80 bg-slate-950/70 px-6 sm:px-8 py-6 sm:py-8 shadow-[0_20px_60px_rgba(15,23,42,0.9)]">
          <header className="mb-4">
            <p className="text-xs uppercase tracking-[0.22em] text-cyan-300/80">
              Magisterský obor · Počítačová grafika a vizualizace
            </p>
            <h2 className="mt-1 text-2xl sm:text-3xl font-extrabold tracking-tight">
              Průchod magisterským oborem (interaktivní mapa)
            </h2>
            <p className="mt-3 text-xs sm:text-sm text-slate-300/90 max-w-3xl">
              Každý obdélník v horním schématu reprezentuje jeden předmět.
              Barvy odpovídají typu předmětu (povinný, specializace,
              grafický blok, volitelný slot). Po kliknutí na předmět se níže
              zobrazí karta ve stylu Grafických večerů. Na desktopu můžeš
              držet <span className="font-mono text-amber-200">Shift</span> /
              <span className="font-mono text-amber-200"> Ctrl</span> pro výběr více předmětů.
            </p>
          </header>

          <div className="mt-4 space-y-6">
            {SEMESTER_ROWS.map((row) => {
              const rowCourses = COURSES.filter(
                (c) => c.year === row.year && c.sem === row.sem
              );

              if (!rowCourses.length) return null;

              return (
                <div key={row.id} className="pt-5 border-t border-slate-800/70">
                  <div className="flex flex-wrap items-start gap-4">
                    <div className="w-28 pt-3 text-[11px] font-semibold text-amber-300">
                      {row.label}
                    </div>
                    <div className="flex-1 flex flex-wrap gap-4">
                      {rowCourses.map((course) => {
                        const selected = selectedCodes.includes(course.code);
                        return (
                          <CoursePill
                            key={course.code}
                            course={course}
                            selected={selected}
                            onClick={(evt) => onToggle(course.code, evt)}
                          />
                        );
                      })}
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        </section>
      );
    };

    const DetailsSection = ({ selectedCourses }) => {
      if (!selectedCourses.length) {
        return (
          <section className="pb-10">
            <h2 className="text-xl sm:text-2xl font-semibold mb-3">
              Detaily předmětu
            </h2>
            <p className="text-sm text-slate-300/90">
              Vyber v horní mapě alespoň jeden předmět. Tady se zobrazí
              karty ve stylu Grafických večerů – vhodné na kopírování do
              slajdů nebo studijních materiálů.
            </p>
          </section>
        );
      }

      return (
        <section className="pb-12">
          <h2 className="text-xl sm:text-2xl font-semibold mb-3">
            Vybrané předměty
          </h2>
          <p className="text-xs sm:text-sm text-slate-300/90 mb-4">
            Karty můžeš snadno vložit do prezentací nebo na web oboru.
          </p>
          <div className="grid gap-5 sm:gap-6 md:grid-cols-2 xl:grid-cols-3">
            {selectedCourses.map((course) => (
              <CourseDetailCard key={course.code} course={course} />
            ))}
          </div>
        </section>
      );
    };

    // --- ROOT APP ----------------------------------------------------------

    const App = () => {
      const [wide, setWide] = useState(false);
      const [selectedCodes, setSelectedCodes] = useState(["ANI-KOP"]);

      const selectedCourses = useMemo(
        () =>
          COURSES.filter((c) => selectedCodes.includes(c.code)),
        [selectedCodes]
      );

      const handleToggleCourse = (code, evt) => {
        const multi = evt && (evt.shiftKey || evt.ctrlKey || evt.metaKey);

        setSelectedCodes((prev) => {
          const exists = prev.includes(code);

          if (multi) {
            if (exists) {
              // odškrtnutí v multi-výběru
              return prev.filter((c) => c !== code);
            }
            return [...prev, code];
          }

          // single click – vždy jen jeden
          if (exists && prev.length === 1) {
            // necháme aspoň jeden vybraný
            return prev;
          }
          return [code];
        });
      };

      const container = wide ? "max-w-[1600px]" : "max-w-6xl";

      return (
        <div className="min-h-screen">
          <div className="px-4 sm:px-6 lg:px-10 py-6 sm:py-8">
            {/* Hlavička + přepínač režimu */}
            <header className={`${container} mx-auto mb-6`}>
              <div className="flex flex-wrap items-center justify-between gap-3 mb-4">
                <h1 className="text-2xl sm:text-3xl lg:text-4xl font-black tracking-tight">
                  Magisterský obor – vizuální průchod předměty
                </h1>

                <button
                  type="button"
                  onClick={() => setWide((v) => !v)}
                  className="inline-flex items-center rounded-full border border-emerald-400/40 bg-emerald-500/10 px-4 py-1.5 text-xs sm:text-sm text-emerald-100 shadow-md hover:bg-emerald-500/20"
                >
                  {wide
                    ? "Kompaktní režim (užší sloupec)"
                    : "Široký režim (celá šířka obrazovky)"}
                </button>
              </div>

              <p className="text-xs sm:text-sm text-slate-300/90 max-w-4xl">
                Tato stránka je prototyp interaktivního schématu ve stylu webu
                Grafit. Horní canvas bude možné vložit do šablony studijního
                plánu, spodní karty pak mohou kopírovat detail předmětu podobně
                jako položky Grafických večerů.
              </p>
            </header>

            {/* Obsah */}
            <main className={`${container} mx-auto space-y-10`}>
              <StudyTrackMap
                selectedCodes={selectedCodes}
                onToggle={handleToggleCourse}
              />
              <DetailsSection selectedCourses={selectedCourses} />
            </main>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
